<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Purely Trace</title>

    <!-- CSS FILES -->                
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">
    <link href="css/templatemo-tiya-golf-club.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <style>
        /* Reset and Fonts */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Ensure the body takes up the full height of the viewport */
        }

        /* Navbar */
        .navbar {
            background-color: #81B29A;
        }

        .navbar-brand img {
            height: 50px;
        }

        .navbar a {
            color: #fff;
        }

        .nav-link {
            color: #fff;  /* Default text color */
            text-decoration: none;
        }

        .nav-link:hover {
            color: #F2CC8F;  /* Hover color for Raw Milk */
        }

        /* Specifically target Raw Milk link for hover */
        .navbar-nav .nav-link[href="Raw Milk.html"]:hover {
            color: #F2CC8F;
        }

        /* Make sure Shipping link stays white in both normal and hover states */
        .navbar-nav .nav-link[href="#"]:hover {
            color: #fff !important;  /* Shipping link hover color set to white */
        }

        .navbar-nav .nav-link[href="#"] {
            color: #fff;  /* Ensure Shipping link remains white by default */
        }

        /* Fullscreen Image */
        .header-image {
            width: 100%;
            height: 400px;
            background: url('https://static.wixstatic.com/media/c09e48_dccd2ea8b1b14a65af2edf5e9f3c70dc~mv2.jpg') center/cover no-repeat;
        }

        .formbold-main-wrapper {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 48px;
        }

        .formbold-form-wrapper {
            margin: 0 auto;
            max-width: 80%;
            width: 100%;
            background: white;
            padding: 40px 20px;
        }

        .formbold-form-input {
            width: 100%;
            padding: 13px 22px;
            border-radius: 5px;
            border: 1px solid #dde3ec;
            background: #ffffff;
            font-weight: 500;
            font-size: 16px;
            color: #536387;
            outline: none;
            resize: none;
        }

        .formbold-form-input::placeholder,
        select.formbold-form-input,
        .formbold-form-input[type='date']::-webkit-datetime-edit-text,
        .formbold-form-input[type='date']::-webkit-datetime-edit-month-field,
        .formbold-form-input[type='date']::-webkit-datetime-edit-day-field,
        .formbold-form-input[type='date']::-webkit-datetime-edit-year-field {
            color: rgba(83, 99, 135, 0.5);
        }

        .formbold-form-input:focus {
            border-color: #6a64f1;
            box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
        }

        .formbold-form-label {
            color: #536387;
            font-size: 14px;
            line-height: 24px;
            display: block;
            margin-bottom: 10px;
        }

        .formbold-submit {
            text-align: center;
            margin-top: 20px;
        }

        .formbold-btn {
            background-color: #6a64f1;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }

        .formbold-btn:hover {
            background-color: #5a53d3;
        }

        /* Footer */
        .site-footer {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            padding: 40px 0;
            margin-top: auto;
            /*padding-bottom: 200px;*/
        }

        .site-footer .container {
            position: relative;
            z-index: 2;
        }

        .site-footer svg {
            position: absolute;
            bottom: 0;
            right: 0;
            left: 0;
            pointer-events: none;
        }

        .site-footer-title {
            color: var(--secondary-color);
        }

        .site-footer p span {
            font-weight: var(--font-weight-medium);
            margin-right: auto;
        }

        .search-btn {
            background-color: transparent; /* Make background transparent */
            border: none; /* Remove border */
            color: #fff; /* Set icon color */
            transition: color 0.3s ease; /* Add a smooth hover effect */
        }

        .search-btn:hover {
            color: #0056b3; /* Change icon color on hover */
            text-decoration: none; /* Remove underline on hover */
        }

        .search-btn i {
            font-size: 1.2rem; /* Adjust icon size */
        }
    </style>
</head>
<body>
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg">                
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="images/Farm Logo.jpeg" class="navbar-brand-image img-fluid" alt="">
                <span class="navbar-brand-text">
                    Purely
                    <small>Trace</small>
                </span>
            </a>

            <div class="d-lg-none ms-auto me-3">
                <a class="btn custom-btn custom-border-btn" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">Login</a>
            </div>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-lg-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="Farmer.html">General Information</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Raw Milk.html">Raw Milk</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Shipping</a>
                    </li>
                </ul>

                <!-- Search Bar -->
                <!-- Search Bar Section -->
                <div class="search-bar-container d-flex justify-content-start">
                    <form class="search-bar d-flex align-items-center" style="max-width: 500px; width: 100%;">
                        <input type="text" class="form-control me-2" placeholder="Search..." style="border-radius: 25px; padding: 10px 15px; border: 1px solid #ccc;">
                        <a href="Show Detail.html" class="btn btn-primary" style="border-radius: 50%; padding: 10px 15px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-search"></i> <!-- Search Icon -->
                        </a>
                    </form>
                </div>

                <div class="d-none d-lg-block ms-lg-3">
                    <a class="btn custom-btn custom-border-btn d-flex align-items-center" href="#" role="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="/Users/porfai/Downloads/profile.png" alt="Profile Icon" class="rounded-circle me-2" style="width: 30px; height: 30px;">
                        <span id="username">Username</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->
     
    <!-- Header Start -->
    <div class="content-wrapper">
        <div class="header-image"></div>
        <div class="text-center container mt-5">
            <h1>Raw Milk</h1>
        </div>
    </div>
    <!-- Header End -->
     
    <!-- Form Section -->
    <div class="formbold-main-wrapper">
        <div class="formbold-form-wrapper">
            <form id="rawmilkform" action="/submit" method="POST">
                
                <!-- Farm Details -->
                <div class="formbold-section">
                    <label for="FarmName" class="formbold-form-label">Farm Name</label>
                    <input type="text" id="FarmName" name="FarmName" class="formbold-form-input" placeholder="Enter your farm name" required>
                </div>
                <!-- Milk Tank Number -->
                <div class="formbold-mb-3">
                    <label for="MilkTankNum" class="formbold-form-label">Milk Tank Number</label>
                    <input type="number" name="MilkTankNum" id="MilkTankNum" class="formbold-form-input" placeholder="Enter your milk tank number" required>
                </div>
                
                <!-- Person in Charge -->
                <div class="formbold-mb-3">
                    <label for="PersonInCharge" class="formbold-form-label">Person in Charge</label>
                    <input type="text" name="PersonInCharge" id="PersonInCharge" class="formbold-form-input" placeholder="Enter name of person in charge" required>
                </div>
                
                <!-- Quantity Section -->
                <div class="formbold-row">
                    <div class="formbold-col">
                        <label for="Quantity" class="formbold-form-label">Quantity</label>
                        <input type="number" id="Quantity" name="Quantity" step="0.01" class="formbold-form-input" placeholder="0.00" required>
                        <select name="QuantityUnit" id="QuantityUnit" class="formbold-select">
                            <option value="Liter">Liter</option>
                            <option value="Milliliter">Milliliter</option>
                            <option value="Ton">Ton</option>
                        </select>
                    </div>
                    
                    <div class="formbold-col">
                        <label for="Temperature" class="formbold-form-label">Temperature</label>
                        <input type="number" id="Temperature" name="Temperature" step="0.01" class="formbold-form-input" placeholder="0.00" required>
                        <select name="TemperatureUnit" id="TemperatureUnit" class="formbold-select">
                            <option value="Celsius">°C</option>
                            <option value="Fahrenheit">°F</option>
                        </select>
                    </div>
                </div>
                
                <!-- Quality of Raw Milk -->
                <div class="formbold-section">
                    <label class="formbold-form-label">Quality of Raw Milk</label>

                    <div class="formbold-mb-3">
                        <label for="pH">pH of Raw Milk</label>
                        <input type="number" id="pH" name="pH" step="0.01" class="formbold-form-input" placeholder="0.00" required>
                    </div>
                    <div class="formbold-mb-3">
                        <label for="Fat">Fat (%)</label>
                        <input type="number" id="Fat" name="Fat" step="0.01" class="formbold-form-input" placeholder="0.00%" required>
                    </div>
                    <div class="formbold-mb-3">
                        <label for="Protein">Protein (%)</label>
                        <input type="number" id="Protein" name="Protein" step="0.01" class="formbold-form-input" placeholder="0.00%" required>
                    </div>
                    
                    <!-- Quality Checks -->
                    <div class="formbold-checkbox">
                        <input type="checkbox" id="MainQualityRM1" onclick="toggleSubCheckboxes('MainQualityRM1', 'subText1')" name="MainQualityRM1" value="Bacteria">
                        <label for="MainQualityRM1" class="form-label">Bacteria Testing</label>
                        <div id="subText1" class="sub-Text mt-2 ms-4">
                            <input id="checkboxTextInput" type="text" name="BacteriaTest" class="formbold-form-input" placeholder="Please fill in additional information.">
                        </div>
                    </div>
                    
                    <div class="formbold-checkbox">
                        <input type="checkbox" id="MainQualityRM2" onclick="toggleSubCheckboxes('MainQualityRM2', 'subText2')" name="MainQualityRM2" value="Contaminants">
                        <label for="MainQualityRM2" class="form-label">Contaminants</label>
                        <div id="subText2" class="sub-Text mt-2 ms-4">
                            <input type="text" name="Contaminants" class="formbold-form-input" placeholder="Please fill in additional information.">
                        </div>
                    </div>
                    
                    <div class="formbold-checkbox">
                        <input type="checkbox" id="MainQualityRM6" onclick="toggleSubCheckboxes('MainQualityRM6', 'subCheckboxes')" name="MainQualityRM6" value="Abnormal">
                        <label for="MainQualityRM6" class="form-label">Abnormal Characteristics</label>
                        <div id="subCheckboxes" class="sub-checkboxes mt-2 ms-4">
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox1" id="subCheckbox1" class="form-check-input">
                                <label for="subCheckbox1" class="form-check-label">Smell bad</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox2" id="subCheckbox2" class="form-check-input">
                                <label for="subCheckbox2" class="form-check-label">Smell not fresh</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox3" id="subCheckbox3" class="form-check-input">
                                <label for="subCheckbox3" class="form-check-label">Abnormal color such as yellow or green</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox4" id="subCheckbox4" class="form-check-input">
                                <label for="subCheckbox4" class="form-check-label">Sour taste</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox5" id="subCheckbox5" class="form-check-input">
                                <label for="subCheckbox5" class="form-check-label">Bitter taste</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox6" id="subCheckbox6" class="form-check-input">
                                <label for="subCheckbox6" class="form-check-label">Cloudy appearance</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox7" id="subCheckbox7" class="form-check-input">
                                <label for="subCheckbox7" class="form-check-label">Lumpy appearance</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="subCheckbox8" id="subCheckbox8" class="form-check-input">
                                <label for="subCheckbox8" class="form-check-label">There is a separation between water and fat.</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Farm Location -->
                <div class="formbold-mb-3">
                    <label for="Location" class="formbold-form-label">Location Link</label>
                    <input type="link" name="Location" id="Location" class="formbold-form-input"/>
                    <iframe id="googleMap" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3874.013476711178!2d100.50176541533313!3d13.756331990349907!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30e2993ddf5f4c7d%3A0x5c5cb2e518ba0a3c!2zQnVua3VtaW4gUGFsYWNlLCBCYW5na29rLCDguJrguKfguKPguLTguKI!5e0!3m2!1sen!2sth!4v1672922742475!5m2!1sen!2sth" width="100%" height="400" frameborder="0" style="border:0;" allowfullscreen class="custom-spacing"> </iframe>
                </div>
                
                <!-- Submit Button -->
                <div class="formbold-submit">
                    <button type="submit" class="formbold-btn">Submit</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Main Content End -->
     
    
    <!-- Footer Start -->
    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-12 me-auto mb-5 mb-lg-0">
                    <a class="navbar-brand d-flex align-items-center" href="index.html">
                        <img src="images/Farm Logo.jpeg" class="navbar-brand-image img-fluid" alt="">
                        <span class="navbar-brand-text">Purely<small>Trace</small></span>
                    </a>
                </div>
                <div class="col-lg-3 col-12">
                    <h5 class="site-footer-title mb-4">Contact Us</h5>
                    <p class="d-flex border-bottom pb-3 mb-3 me-lg-3">
                        <span>Nawisa Thanasuttawong</span>
                        64070264@kmitl.ac.th
                    </p>
                    <p class="d-flex me-lg-3">
                        <span>Pinya Nuangudom</span>
                        64070266@kmitl.ac.th
                    </p>
                </div>
                <div class="col-lg-2 col-12 ms-auto">
                    <ul class="social-icon mt-lg-5 mt-3 mb-4">
                        <li class="social-icon-item">
                            <a href="#" class="social-icon-link bi-instagram"></a>
                        </li>
                        <li class="social-icon-item">
                            <a href="#" class="social-icon-link bi-twitter"></a>
                        </li>
                        <li class="social-icon-item">
                            <a href="#" class="social-icon-link bi-whatsapp"></a>
                        </li>
                    </ul>  
                </div>
            </div>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
            <path fill="#81B29A" fill-opacity="1" d="M0,224L34.3,192C68.6,160,137,96,206,90.7C274.3,85,343,139,411,144C480,149,549,107,617,122.7C685.7,139,754,213,823,240C891.4,267,960,245,1029,224C1097.1,203,1166,181,1234,160C1302.9,139,1371,117,1406,106.7L1440,96L1440,320L1405.7,320C1371.4,320,1303,320,1234,320C1165.7,320,1097,320,1029,320C960,320,891,320,823,320C754.3,320,686,320,617,320C548.6,320,480,320,411,320C342.9,320,274,320,206,320C137.1,320,69,320,34,320L0,320Z"></path>
        </svg>
    </footer>
    <!-- Footer End -->

    <script>
        function searchTable() {
            // Get search input
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            
            // Get all rows from the table body
            const rows = document.querySelectorAll('#dataTable tbody tr');
            
            // Loop through rows and toggle visibility based on search query
            rows.forEach(row => {
                const cells = Array.from(row.querySelectorAll('td'));
                const rowText = cells.map(cell => cell.textContent.toLowerCase()).join(' ');
                
                // Check if search input matches any cell content
                if (rowText.includes(searchInput)) {
                    row.style.display = ''; // Show row
                } else {
                    row.style.display = 'none'; // Hide row
                }
            });
        }
    </script>
    
     
    <script>
    // Get the current page URL
        const currentPage = window.location.pathname;

    // Select all navbar links
        const navLinks = document.querySelectorAll('.navbar-nav .nav-link');

    // Loop through the links and check if the link's href matches the current page
        navLinks.forEach(link => {
            if (link.href.includes(currentPage)) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
    </script>
    <!--Script for Sub-Checkbox(Quality of milk)-->
    <script>
        function toggleSubCheckboxes(mainCheckboxId, subElementId){
            var mainCheckbox = document.getElementById(mainCheckboxId);
            var subElement = document.getElementById(subElementId);

        // show / hide sub-element ตามสถานะการ click ของ main-checkbox
            if(mainCheckbox.checked){
                subElement.style.display = "block"; //show sub-checkbox
        
            } else{
                subElement.style.display = "none"; //hide
            }

        }
    </script>

    <script>
        document.getElementById('rawmilkform').addEventListener('submit', function(e) {
            e.preventDefault(); // ป้องกันไม่ให้หน้าโหลดซ้ำ
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());

            fetch('/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(data => {
                console.log('สำเร็จ:', data);
                window.location.href = '/display';  // เมื่อส่งข้อมูลแล้วให้เปลี่ยนไปยังหน้าที่แสดงข้อมูล
            })
            .catch((error) => {
                console.error('เกิดข้อผิดพลาด:', error);
            });
        });
        
    </script>

    <!--Script for Google Map part-->
    <script>
        let Gmap;
        let marker;

        function initMap() {
        Gmap = new google.maps.Map(document.getElementById("Gmap"), {
            center: { lat: 13.7563, lng: 100.5018 },
            zoom: 10,
        });

        Gmap.addListener("click", (event) => {
            placeMarker(event.latLng);
            updateCoordinates(event.latLng);
        });
    }

    function placeMarker(location) {
        if (marker) {
            marker.setMap(null); // remove old marker
        }

        marker = new google.maps.Marker({ // set new marker
            position: location,
            map: Gmap,
        });
    }

    function updateCoordinates(location) {
        const lat = location.lat();
        const lng = location.lng();
        document.getElementById("coordinates").innerText = `Latitude: ${lat}, Longitude: ${lng}`;
        document.getElementById("LocationLink").value = `https://maps.google.com/?q=${lat},${lng}`; // Update input with Google Maps link
    }

    document.getElementById("LocationLink").addEventListener("change", function() {
        const url = this.value;
        const latLng = getLatLngFromURL(url);
        if (latLng) {
            placeMarker(latLng);
            Gmap.setCenter(latLng);
            updateCoordinates(latLng);
        }
    });

    function getLatLngFromURL(url) {
    const regex = /@(-?\d+\.\d+),(-?\d+\.\d+)/;
    const match = url.match(regex);
    if (match) {
        const lat = parseFloat(match[1]);
        const lng = parseFloat(match[2]);
        return { lat, lng };
    }
    return null;
    }
    </script>

    <!--Script for API Google Map-->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4l6cSn6f3m4FLynCgDAvGN12rwgl4LvU&callback=initMap"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script>
        // Replace with logged-in user's name dynamically
        const username = "John Doe"; // Example
        document.getElementById('username').innerText = username;
    </script>
    <script>
        function submitForm() {
            // Disable all input fields after submit
            var elements = document.getElementsByTagName("input");
            for (var i = 0; i < elements.length; i++) {
                elements[i].disabled = true;
            }
            document.getElementById("submitBtn").disabled = true; // Disable submit button
        }

        function editForm() {
            // Enable all input fields when edit is clicked
            var elements = document.getElementsByTagName("input");
            for (var i = 0; i < elements.length; i++) {
                elements[i].disabled = false;
            }
            document.getElementById("submitBtn").disabled = false; // Enable submit button again
        }
    </script>
</body>
</html>
